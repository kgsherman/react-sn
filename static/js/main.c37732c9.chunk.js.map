{"version":3,"sources":["utils/snapi.js","components/Home.js","context/auth-context.js","utils/sn.js","utils/auth.js","components/AuthCallback.js","components/Incidents.js","components/Header.js","components/Authenticator.js","components/Unauthorized.js","components/App.js","serviceWorker.js","index.js"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","Object","defineProperty","exports","SNAPI","_a","token","instance","endpoint","tableEndpoint","defaultHeaders","Headers","prototype","handleResponse","response","json","e_1","ok","console","error","status","JSON","stringify","getRecords","table","_b","displayValue","_c","excludeReferenceLink","_d","fields","_e","limit","_f","offset","_g","query","_h","queryNoDomain","_j","suppressPaginationHeader","_k","view","queryParameters","_l","join","fetch","method","headers","getRecord","sysId","createRecord","data","inputDisplayValue","scriptedRestApi","resourcePath","httpMethod","additionalHeaders","key","set","log","default","Home","to","AuthContext","createContext","useAuthValue","useContext","getAuthenticatedUser","a","localStorage","getItem","sn","snapi","Accept","statusText","auth","ClientOAuth2","clientId","clientSecret","accessTokenUri","authorizationUri","redirectUri","state","oauth2Callback","uri","getToken","window","setItem","accessToken","signOut","removeItem","oauth2Uri","getUri","AuthCallback","useEffect","location","Incidents","authenticated","useState","incidents","setIncidents","loading","setLoading","Header","user","dispatch","handleSignOut","type","name","href","onClick","Authenticator","refreshAuthentication","userData","Unauthorized","App","path","exact","component","Component","rest","render","props","Boolean","hostname","match","ReactDOM","children","Provider","useReducer","action","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c37732c9.chunk.js","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction btoa(text) {\n    return Buffer.from(text).toString('base64');\n}\nvar SNAPI = /** @class */ (function () {\n    function SNAPI(_a) {\n        var token = _a.token, instance = _a.instance;\n        this.instance = instance;\n        this.endpoint = \"https://\" + this.instance + \".service-now.com\";\n        this.tableEndpoint = \"https://\" + this.instance + \".service-now.com/api/now/table\";\n        this.defaultHeaders = new Headers({\n            'Content-Type': 'application/json',\n            'Authorization': \"Bearer \" + token\n        });\n    }\n    SNAPI.prototype.handleResponse = function (response) {\n        return __awaiter(this, void 0, void 0, function () {\n            var json, json, e_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!response.ok) return [3 /*break*/, 2];\n                        return [4 /*yield*/, response.json()];\n                    case 1:\n                        json = _a.sent();\n                        return [2 /*return*/, json.result];\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        return [4 /*yield*/, response.json()];\n                    case 3:\n                        json = _a.sent();\n                        console.error(\"ServiceNow returned error \" + response.status + \":\\n\" + JSON.stringify(json, null, 2));\n                        return [2 /*return*/, null];\n                    case 4:\n                        e_1 = _a.sent();\n                        console.error('Error attempting to parse response. \\n' + e_1);\n                        return [2 /*return*/, null];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    SNAPI.prototype.getRecords = function (table, _a) {\n        var _b = _a.displayValue, displayValue = _b === void 0 ? false : _b, _c = _a.excludeReferenceLink, excludeReferenceLink = _c === void 0 ? false : _c, _d = _a.fields, fields = _d === void 0 ? [] : _d, _e = _a.limit, limit = _e === void 0 ? 10000 : _e, _f = _a.offset, offset = _f === void 0 ? 0 : _f, _g = _a.query, query = _g === void 0 ? '' : _g, _h = _a.queryNoDomain, queryNoDomain = _h === void 0 ? false : _h, _j = _a.suppressPaginationHeader, suppressPaginationHeader = _j === void 0 ? false : _j, _k = _a.view, view = _k === void 0 ? '' : _k;\n        return __awaiter(this, void 0, void 0, function () {\n            var queryParameters, response;\n            return __generator(this, function (_l) {\n                switch (_l.label) {\n                    case 0:\n                        queryParameters = [\n                            \"sysparm_display_value=\" + displayValue,\n                            \"sysparm_exclude_reference_link=\" + excludeReferenceLink,\n                            \"sysparm_fields=\" + fields.join(),\n                            \"sysparm_limit=\" + limit,\n                            \"sysparm_offset=\" + offset,\n                            \"sysparm_query=\" + query,\n                            \"sysparm_query_no_domain=\" + queryNoDomain,\n                            \"sysparm_suppress_pagination_header=\" + suppressPaginationHeader,\n                            \"sysparm_view=\" + view\n                        ].join('&');\n                        return [4 /*yield*/, fetch(this.tableEndpoint + \"/\" + table + \"?\" + queryParameters, {\n                                method: 'GET',\n                                headers: this.defaultHeaders\n                            })];\n                    case 1:\n                        response = _l.sent();\n                        return [4 /*yield*/, this.handleResponse(response)];\n                    case 2: return [2 /*return*/, _l.sent()];\n                }\n            });\n        });\n    };\n    SNAPI.prototype.getRecord = function (table, sysId, _a) {\n        var _b = _a === void 0 ? {} : _a, _c = _b.displayValue, displayValue = _c === void 0 ? false : _c, _d = _b.excludeReferenceLink, excludeReferenceLink = _d === void 0 ? false : _d, _e = _b.fields, fields = _e === void 0 ? [] : _e, _f = _b.queryNoDomain, queryNoDomain = _f === void 0 ? false : _f, _g = _b.view, view = _g === void 0 ? '' : _g;\n        return __awaiter(this, void 0, void 0, function () {\n            var queryParameters, response;\n            return __generator(this, function (_h) {\n                switch (_h.label) {\n                    case 0:\n                        queryParameters = [\n                            \"sysparm_display_value=\" + displayValue,\n                            \"sysparm_exclude_reference_link=\" + excludeReferenceLink,\n                            \"sysparm_fields=\" + fields.join(),\n                            \"sysparm_query_no_domain=\" + queryNoDomain,\n                            \"sysparm_view=\" + view\n                        ].join('&');\n                        return [4 /*yield*/, fetch(this.tableEndpoint + \"/\" + table + \"/\" + sysId + \"?\" + queryParameters, {\n                                method: 'GET',\n                                headers: this.defaultHeaders\n                            })];\n                    case 1:\n                        response = _h.sent();\n                        return [4 /*yield*/, this.handleResponse(response)];\n                    case 2: return [2 /*return*/, _h.sent()];\n                }\n            });\n        });\n    };\n    SNAPI.prototype.createRecord = function (table, data, _a) {\n        var _b = _a === void 0 ? {} : _a, _c = _b.displayValue, displayValue = _c === void 0 ? false : _c, _d = _b.fields, fields = _d === void 0 ? [] : _d, _e = _b.excludeReferenceLink, excludeReferenceLink = _e === void 0 ? false : _e, _f = _b.inputDisplayValue, inputDisplayValue = _f === void 0 ? false : _f, _g = _b.view, view = _g === void 0 ? '' : _g;\n        return __awaiter(this, void 0, void 0, function () {\n            var queryParameters, response;\n            return __generator(this, function (_h) {\n                switch (_h.label) {\n                    case 0:\n                        queryParameters = [\n                            \"sysparm_display_value=\" + displayValue,\n                            \"sysparm_fields=\" + fields.join(),\n                            \"sysparm_exclude_reference_link=\" + excludeReferenceLink,\n                            \"sysparm_input_display_value=\" + inputDisplayValue,\n                            \"sysparm_view=\" + view\n                        ].join('&');\n                        return [4 /*yield*/, fetch(this.tableEndpoint + \"/\" + table + \"?\" + queryParameters, {\n                                method: 'POST',\n                                headers: this.defaultHeaders\n                            })];\n                    case 1:\n                        response = _h.sent();\n                        return [4 /*yield*/, this.handleResponse(response)];\n                    case 2: return [2 /*return*/, _h.sent()];\n                }\n            });\n        });\n    };\n    SNAPI.prototype.scriptedRestApi = function (resourcePath, httpMethod, _a) {\n        var _b = _a.additionalHeaders, additionalHeaders = _b === void 0 ? {} : _b;\n        return __awaiter(this, void 0, void 0, function () {\n            var headers, key, response;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        headers = new Headers(this.defaultHeaders);\n                        for (key in additionalHeaders) {\n                            headers.set(key, additionalHeaders[key]);\n                        }\n                        console.log(JSON.stringify(headers));\n                        return [4 /*yield*/, fetch(this.endpoint + \"/\" + resourcePath, {\n                                method: httpMethod,\n                                headers: headers,\n                            })];\n                    case 1:\n                        response = _c.sent();\n                        return [2 /*return*/, response];\n                }\n            });\n        });\n    };\n    return SNAPI;\n}());\nexports.default = SNAPI;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst Home = () => (\n    <div>\n        <h1>Home</h1>\n        <Link to='/incidents'>Incidents</Link>\n    </div>\n);\n\nexport default Home;","import React, { createContext, useContext, useReducer } from 'react';\n\nimport { signOut } from '../utils/auth';\n\nexport const AuthContext = createContext();\n\nexport const AuthProvider = ({ children }) => {\n  const initialState = {\n    authenticated: false,\n    user: null\n  };\n\n  const reducer = (state, action) => {\n    switch (action.type) {\n      case 'signIn':\n        return {\n          authenticated: true,\n          user: action.user\n        };\n      case 'signOut':\n        signOut();\n        return {\n          authenticated: false,\n          user: null\n        };\n      default:\n        return state;\n    }\n  };\n\n  return <AuthContext.Provider value={useReducer(reducer, initialState)}>{children}</AuthContext.Provider>;\n};\n\nexport const useAuthValue = () => useContext(AuthContext);\n","import snapi from './snapi';\n\nexport const getAuthenticatedUser = async () => {\n  const token = localStorage.getItem('token');\n  const instance = 'dev72041';\n\n  if (!token) return false;\n\n  try {\n    const sn = new snapi({ token, instance });\n    const response = await sn.scriptedRestApi('api/146223/auth_check', 'GET', {\n      headers: {\n        Accept: 'application/json'\n      }\n    });\n\n    if (!response.ok) {\n        console.log('Response failed.', response.statusText)\n        return false;\n    }\n\n    const json = await response.json();\n    return json;\n  } catch (e) {\n    return false;\n  }\n};\n","import ClientOAuth2 from 'client-oauth2';\n\nimport { useAuthValue } from '../context/auth-context';\n\nimport { getAuthenticatedUser } from '../utils/sn';\n\nconst auth = new ClientOAuth2({\n  clientId: '708e03d320033300941bb03db73a7eff',\n  clientSecret: 'Nl;Uz,&Hh]',\n  accessTokenUri: 'https://dev72041.service-now.com/oauth_token.do',\n  authorizationUri: 'https://dev72041.service-now.com/oauth_auth.do',\n  redirectUri: 'http://localhost:3000/auth/callback',\n  state: 'keyboard-cat'\n});\n\nexport const oauth2Callback = async uri => {\n  try {\n    const token = await auth.token.getToken(uri);\n    window.localStorage.setItem('token', token.accessToken);\n\n    return true;\n  } catch (e) {\n    console.error(e);\n    return false;\n  }\n};\n\nexport const signOut = () => {\n  window.localStorage.removeItem('token');\n}\n/*\nexport const refreshAuthentication = async () => {\n  const [{ authenticated, user }, dispatch] = useAuthValue();\n\n  const userData = await getAuthenticatedUser();\n  if (userData) {\n    dispatch({\n      type: 'signIn',\n      user: userData\n    });\n  } else {\n    dispatch({ type: 'signOut' });\n  }\n};\n*/\n\nexport const oauth2Uri = auth.token.getUri();\n","import React, { useEffect } from 'react';\n\nimport { oauth2Callback } from '../utils/auth';\n\nconst AuthCallback = () => {\n\n    useEffect(() => {\n        (async () => {\n            await oauth2Callback(window.location);\n            window.location = '/';\n        })();\n    }, []);\n    \n    return (\n        <div>\n            <h1>Redirecting...</h1>\n        </div>\n    );\n}\n\nexport default AuthCallback;","import React, { useEffect, useState } from 'react';\nimport SNAPI from '../utils/snapi';\n\nimport { useAuthValue } from '../context/auth-context';\n\nconst Incidents = () => {\n  const [{ authenticated }] = useAuthValue();\n  const [incidents, setIncidents] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    (async () => {\n      const sn = new SNAPI({\n        token: window.localStorage.getItem('token'),\n        instance: 'dev72041'\n      });\n\n      const incidents = await sn.getRecords('incident', {\n        fields: ['number', 'short_description'],\n        limit: 2,\n        query: 'active=true'\n      });\n\n      setIncidents(incidents);\n      setLoading(false);\n    })();\n  }, []);\n\n  return (\n      <div>\n          <code>\n              {loading\n                  ? 'Loading...'\n                  : JSON.stringify(incidents, null, 2)                \n              }\n          </code>\n      </div>\n  );\n};\n\nexport default Incidents;","import React from 'react';\n\nimport { useAuthValue } from '../context/auth-context';\n\nimport { oauth2Uri } from '../utils/auth';\n\nconst Header = () => {\n  const [{ authenticated, user }, dispatch] = useAuthValue();\n\n  const handleSignOut = () => {\n    dispatch({ type: 'signOut' });\n  };\n\n  const renderSignedIn = () => (\n    <div>\n      <span>Hello, {user.name}</span>\n      <a href=\"#\" onClick={handleSignOut}>\n        Sign out\n      </a>\n    </div>\n  );\n\n  const renderSignedOut = () => (\n    <div>\n      <a href={oauth2Uri}>Sign in</a>\n    </div>\n  );\n\n  return authenticated ? renderSignedIn() : renderSignedOut();\n};\n\nexport default Header;\n","import React, { useEffect } from 'react';\n\nimport { useAuthValue } from '../context/auth-context';\n\nimport { refreshAuthentication } from '../utils/auth';\nimport { getAuthenticatedUser } from '../utils/sn';\n\nconst Authenticator = () => {\n    const [{ authenticated, user }, dispatch] = useAuthValue();\n\n    const refreshAuthentication = async () => {\n        const userData = await getAuthenticatedUser();\n\n        if (userData) {\n            console.log('got user data', userData);\n          dispatch({\n            type: 'signIn',\n            user: userData.result\n          });\n        } else {\n            console.log('didnt get user data, signing out')\n          dispatch({ type: 'signOut' });\n        }\n    }\n    useEffect(() => {\n        refreshAuthentication();\n    }, []);\n\n    return <div>authenticator</div>;\n}\n\nexport default Authenticator;","import React from 'react';\n\nconst Unauthorized = () => (\n    <div>\n        <h1>You're Unauthorized</h1>\n    </div>\n);\n\nexport default Unauthorized;","import React, { Component } from 'react';\nimport { BrowserRouter as Router, Route, Link } from 'react-router-dom';\n\nimport Home from './Home';\nimport AuthCallback from './AuthCallback';\nimport Incidents from './Incidents';\nimport Header from './Header';\nimport Authenticator from './Authenticator';\nimport Unauthorized from './Unauthorized';\n\nimport { useAuthValue } from '../context/auth-context';\n\nconst App = () => {\n  const [{ authenticated }] = useAuthValue();\n\n  const PrivateRoute = ({ component: Component, ...rest }) => {\n    return <Route {...rest} render={props => authenticated ? <Component {...props} /> : <Unauthorized />} />;\n  };\n\n  return (\n    <Router>\n      <Authenticator />\n      <div>\n        <Header />\n        <nav>\n          <ul>\n            <li>\n              <Link to=\"/\">Home</Link>\n            </li>\n            <li>\n              <Link to=\"/incidents\">Incidents</Link>\n            </li>\n          </ul>\n        </nav>\n\n        <Route path=\"/\" exact component={Home} />\n        <PrivateRoute path=\"/incidents\" component={Incidents} />\n        <Route path=\"/auth/callback\" exact component={AuthCallback} />\n      </div>\n    </Router>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nimport { AuthProvider } from './context/auth-context';\n\nReactDOM.render(\n  <AuthProvider>\n    <App />\n  </AuthProvider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}